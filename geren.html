<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‰∏™‰∫∫ÂèäÂ∞èÂæÆ‰ºÅ‰∏öÂà©ÁéáÊµãÁÆóÂ∑•ÂÖ∑Ôºà‰øÆÂ§çÁâàÔºâ</title>
    <style>
        :root {
            --primary: #3498db;
            --primary-dark: #2980b9;
            --secondary: #2c3e50;
            --light: #ecf0f1;
            --success: #27ae60;
            --warning: #f39c12;
            --danger: #e74c3c;
            --highlight: #e74c3c;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #f8f9fa, #e6f2ff);
            padding: 20px;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        header {
            background: linear-gradient(135deg, var(--secondary), #1a2530);
            color: white;
            padding: 30px 20px;
            text-align: center;
            margin-bottom: 20px;
            position: relative;
        }
        
        h1 {
            font-size: 2.2rem;
            margin-bottom: 10px;
        }
        
        .subtitle {
            font-size: 1.1rem;
            opacity: 0.9;
            max-width: 800px;
            margin: 0 auto;
        }
        
        .card {
            background: white;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
            padding: 25px;
            margin: 0 20px 25px;
            transition: transform 0.3s ease;
            border: 1px solid #eaeaea;
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.08);
        }
        
        .section-title {
            margin-bottom: 20px;
            padding-bottom: 12px;
            border-bottom: 2px solid var(--primary);
            color: var(--secondary);
            font-size: 1.5rem;
            display: flex;
            align-items: center;
        }
        
        .section-title i {
            margin-right: 10px;
            color: var(--primary);
        }
        
        .form-row {
            display: flex;
            flex-wrap: wrap;
            margin: 0 -12px 15px;
        }
        
        .form-group {
            flex: 1 0 calc(50% - 24px);
            margin: 0 12px 20px;
            min-width: 250px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--secondary);
        }
        
        .input-wrapper {
            position: relative;
        }
        
        input, select {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 16px;
            transition: all 0.3s;
            background-color: #fafafa;
        }
        
        input:focus, select:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.2);
            background-color: white;
        }
        
        .input-unit {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: #777;
            font-size: 14px;
        }
        
        button {
            background: linear-gradient(to right, var(--primary), var(--primary-dark));
            color: white;
            border: none;
            padding: 14px 28px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: all 0.3s;
            margin-right: 15px;
            margin-top: 15px;
            box-shadow: 0 4px 10px rgba(52, 152, 219, 0.3);
        }
        
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(52, 152, 219, 0.4);
        }
        
        #resetBtn {
            background: linear-gradient(to right, var(--secondary), #1a2530);
            box-shadow: 0 4px 10px rgba(44, 62, 80, 0.3);
        }
        
        #resetBtn:hover {
            box-shadow: 0 6px 15px rgba(44, 62, 80, 0.4);
        }
        
        .result-container {
            background: linear-gradient(135deg, #e8f4fc, #d5e9ff);
            border-radius: 10px;
            padding: 25px;
            margin: 20px;
            border-left: 5px solid var(--primary);
        }
        
        .result-title {
            color: var(--primary);
            margin-bottom: 20px;
            font-size: 24px;
            font-weight: 700;
        }
        
        .result-content {
            display: flex;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 25px;
        }
        
        .result-box {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.05);
            flex: 1;
            min-width: 250px;
            text-align: center;
            transition: all 0.3s;
        }
        
        .result-box:hover {
            transform: scale(1.02);
            box-shadow: 0 6px 15px rgba(0,0,0,0.08);
        }
        
        .result-label {
            font-weight: 600;
            color: var(--secondary);
            margin-bottom: 10px;
            font-size: 18px;
        }
        
        .result-value {
            font-size: 32px;
            color: var(--primary);
            font-weight: 800;
            margin: 10px 0;
        }
        
        .additional-info {
            color: #666;
            font-size: 15px;
            margin-top: 8px;
        }
        
        .config-btn {
            position: absolute;
            top: 25px;
            right: 25px;
            background: rgba(255,255,255,0.2);
            border: none;
            padding: 12px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 20px;
            color: white;
            transition: all 0.3s;
        }
        
        .config-btn:hover {
            background: rgba(255,255,255,0.3);
            transform: rotate(30deg);
        }
        
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }
        
        .modal-content {
            background: white;
            border-radius: 10px;
            padding: 30px;
            width: 90%;
            max-width: 800px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 15px 40px rgba(0,0,0,0.2);
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
        }
        
        .close {
            font-size: 28px;
            cursor: pointer;
            color: #777;
            transition: color 0.3s;
        }
        
        .close:hover {
            color: var(--danger);
        }
        
        .calculation-steps {
            margin-top: 25px;
            border-top: 1px solid #e0e0e0;
            padding-top: 25px;
        }
        
        .step {
            margin-bottom: 20px;
            padding: 20px;
            background: #f9f9f9;
            border-radius: 8px;
            border-left: 4px solid var(--primary);
        }
        
        .step-title {
            font-weight: 700;
            margin-bottom: 10px;
            color: var(--secondary);
            font-size: 18px;
        }
        
        .highlight {
            color: var(--highlight);
            font-weight: 700;
            background-color: #fff5f5;
            padding: 2px 6px;
            border-radius: 4px;
        }
        
        .fix-banner {
            background: linear-gradient(to right, #e74c3c, #c0392b);
            color: white;
            padding: 15px;
            text-align: center;
            font-weight: 600;
            margin-bottom: 20px;
            border-radius: 0 0 8px 8px;
        }
        
        /* ÂìçÂ∫îÂºèË∞ÉÊï¥ */
        @media (max-width: 768px) {
            .form-group {
                flex: 1 0 calc(100% - 24px);
            }
            
            .result-content {
                flex-direction: column;
            }
            
            h1 {
                font-size: 1.8rem;
            }
            
            .section-title {
                font-size: 1.3rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="fix-banner">
            Â∑≤‰øÆÂ§çÈ¢ùÂ∫¶Âà§Êñ≠ÈóÆÈ¢ò - Áé∞Âú®ÈáëÈ¢ùÂà§Êñ≠ÈÄªËæëÂÆåÂÖ®ÂáÜÁ°Æ
        </div>
        
        <header>
            <h1>‰∏™‰∫∫ÂèäÂ∞èÂæÆ‰ºÅ‰∏öË¥∑Ê¨æÂà©ÁéáÊµãÁÆóÂ∑•ÂÖ∑</h1>
            <p class="subtitle">Âü∫‰∫éÂÆ¢Êà∑Á±ªÂûã„ÄÅÂÄüÊ¨æÈáëÈ¢ù„ÄÅÊãÖ‰øùÊñπÂºèÁ≠âÂ§öÁª¥Â∫¶Âõ†Á¥†Á≤æÂáÜÊµãÁÆóË¥∑Ê¨æÂà©Áéá</p>
            <button id="configBtn" class="config-btn">‚öôÔ∏è</button>
        </header>
        
        <div class="card">
            <h2 class="section-title">üìù Âü∫Á°Ä‰ø°ÊÅØ</h2>
            <div class="form-row">
                <div class="form-group">
                    <label for="customerType">ÂÆ¢Êà∑Á±ªÂûã</label>
                    <select id="customerType">
                        <option value="personal">‰∏™‰∫∫ÂÆ¢Êà∑</option>
                        <option value="company">Â∞èÂæÆ‰ºÅ‰∏ö‰∏ª</option>
                    </select>
                </div>
                
                <div class="form-group" id="customerCategoryContainer">
                    <label for="customerCategory">ÂÆ¢Êà∑ÂàÜÁ±ª</label>
                    <select id="customerCategory">
                        <option value="general">‰∏ÄËà¨ÂÆ¢Êà∑</option>
                        <option value="premium">È´òÁ´ØÂÆ¢Êà∑</option>
                        <option value="preferred">ÂÖ∂‰ªñ‰ºòË¥®ÂÆ¢Êà∑</option>
                    </select>
                </div>
            </div>
            
            <div class="form-row">
                <div class="form-group" id="amountContainer">
                    <label for="loanAmount">ÂÄüÊ¨æÈáëÈ¢ù</label>
                    <div class="input-wrapper">
                        <input type="number" id="loanAmount" value="60">
                        <span class="input-unit">‰∏áÂÖÉ</span>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="loanTerm">Ë¥∑Ê¨æÊúüÈôê</label>
                    <div class="input-wrapper">
                        <input type="number" id="loanTerm" min="1" value="3">
                        <span class="input-unit">Âπ¥</span>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="card">
            <h2 class="section-title">üõ°Ô∏è ÊãÖ‰øùÊñπÂºè</h2>
            <div class="form-row">
                <div class="form-group">
                    <label for="guaranteeType">ÊãÖ‰øùÁ±ªÂûã</label>
                    <select id="guaranteeType">
                        <option value="mortgage">Ë∂≥ÂÄºÊäµÊäº</option>
                        <option value="pledge">Ë∂≥ÂÄºË¥®Êäº</option>
                        <option value="guarantee" selected>‰øùËØÅÁ±ª</option>
                        <option value="combo">‰øùËØÅÂä†ÊäµÊäºÁªÑÂêà</option>
                    </select>
                </div>
            </div>
            
            <div id="comboContainer" style="display: none;">
                <div class="form-row">
                    <div class="form-group">
                        <label for="collateralValue">ÊäµÊäºÁâ©ËØÑ‰º∞‰ª∑ÂÄº</label>
                        <div class="input-wrapper">
                            <input type="number" id="collateralValue" value="100">
                            <span class="input-unit">‰∏áÂÖÉ</span>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="mortgageRate">ÊäµÊäºÁéá</label>
                        <div class="input-wrapper">
                            <input type="number" id="mortgageRate" value="70" step="5">
                            <span class="input-unit">%</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="card">
            <h2 class="section-title">üéÅ Âà©Áéá‰ºòÊÉ†</h2>
            <div class="form-row">
                <div class="form-group">
                    <label for="socialCardNum">ÂºÄÁ´ãÁ§æ‰øùÂç°Êï∞Èáè</label>
                    <input type="number" id="socialCardNum" value="0" min="0">
                </div>
                
                <div class="form-group">
                    <label for="socialCardLoan">‰ΩøÁî®Á§æ‰øùÂç°ÂèëÊîæË¥∑Ê¨æ</label>
                    <select id="socialCardLoan">
                        <option value="no">Âê¶</option>
                        <option value="yes">ÊòØ</option>
                    </select>
                </div>
            </div>
            
            <div class="form-row">
                <div class="form-group">
                    <label for="mobileBankNum">ÂºÄÈÄöÊâãÊú∫Èì∂Ë°åÊï∞Èáè</label>
                    <input type="number" id="mobileBankNum" value="0" min="0">
                </div>
                
                <div class="form-group">
                    <label for="aggregatePayment">ÂºÄÈÄöËÅöÂêàÊîØ‰ªò</label>
                    <select id="aggregatePayment">
                        <option value="no">Âê¶</option>
                        <option value="yes">ÊòØ</option>
                    </select>
                </div>
            </div>
            
            <div class="form-row">
                <div class="form-group">
                    <label for="fundsRetention">ËµÑÈáëÁïôÂ≠òÊó•Âùá</label>
                    <div class="input-wrapper">
                        <input type="number" id="fundsRetention" value="0" min="0" step="0.1">
                        <span class="input-unit">‰∏áÂÖÉ</span>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="stockAmount">ËÇ°ÈáëÊåÅÊúâÈáè</label>
                    <div class="input-wrapper">
                        <input type="number" id="stockAmount" value="0" min="0" step="10">
                        <span class="input-unit">‰∏áËÇ°</span>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="card">
            <h2 class="section-title">üìå ÂÖ∂‰ªñÂõ†Á¥†</h2>
            <div class="form-row">
                <div class="form-group">
                    <label for="potentialCustomer">ÊòØÂê¶‰∏∫ÊΩúÂäõÂÆ¢Êà∑</label>
                    <select id="potentialCustomer">
                        <option value="no">Âê¶</option>
                        <option value="yes">ÊòØ</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="loanCategory">ÂÄüÊ¨æÁßçÁ±ª</label>
                    <select id="loanCategory">
                        <option value="normal">‰∏ÄËà¨ÂÄüÊ¨æ</option>
                        <option value="renewal">ÂéüÈ¢ùÂ∫¶ÂéüÊãÖ‰øùÊî∂ÂõûÂÜçË¥∑</option>
                        <option value="restructure">Áª≠Ë¥∑/ÂÄüÊñ∞ËøòÊóß/ÂÄ∫Âä°ÈáçÁªÑ</option>
                    </select>
                </div>
            </div>
            
            <div id="renewalContainer" style="display: none;">
                <div class="form-row">
                    <div class="form-group">
                        <label for="originalRate">ÂéüÊâßË°åÂà©Áéá</label>
                        <div class="input-wrapper">
                            <input type="number" id="originalRate" step="0.01" value="4.5">
                            <span class="input-unit">%</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="form-row" style="padding: 0 20px;">
            <button id="calculateBtn">ËÆ°ÁÆóÊâßË°åÂà©Áéá</button>
            <button id="resetBtn">ÈáçÁΩÆË°®Âçï</button>
        </div>
        
        <div class="result-container">
            <div class="result-title">ÊµãÁÆóÁªìÊûú</div>
            <div class="result-content">
                <div class="result-box">
                    <div class="result-label">ÊúÄÁªàÊâßË°åÂà©Áéá</div>
                    <div id="finalRate" class="result-value">7.00%</div>
                    <div class="additional-info">Âü∫Á°ÄÂà©Áéá + Ë∞ÉÊï¥È°π</div>
                </div>
                <div class="result-box">
                    <div class="result-label">LPRÂä†ÂáèÂü∫ÁÇπ</div>
                    <div id="lprPoints" class="result-value">+400 BP</div>
                    <div class="additional-info">Âü∫‰∫é1Âπ¥ÊúüLPR 3.00%</div>
                </div>
                <div class="result-box">
                    <div class="result-label">LPRÂèÇËÄÉÊ°£Ê¨°</div>
                    <div id="lprLevel" class="result-value">1Âπ¥ÊúüLPR</div>
                    <div class="additional-info">Ë¥∑Ê¨æÊúüÈôê ‚â§ 3Âπ¥</div>
                </div>
            </div>
            
            <div class="calculation-steps">
                <div class="step">
                    <div class="step-title">ËØ¶ÁªÜËÆ°ÁÆóËøáÁ®ãÔºö</div>
                    <div id="calculationDetails">
                        <p>1. Âü∫Á°ÄÂà©ÁéáËÆ°ÁÆóÔºàrate0Ôºâ:</p>
                        <p>&nbsp;&nbsp;‚Ä¢ ÂÆ¢Êà∑Á±ªÂûã: <span class="highlight">‰∏™‰∫∫</span></p>
                        <p>&nbsp;&nbsp;‚Ä¢ ÂÆ¢Êà∑ÂàÜÁ±ª: <span class="highlight">‰∏ÄËà¨ÂÆ¢Êà∑</span></p>
                        <p>&nbsp;&nbsp;‚Ä¢ È¢ùÂ∫¶Áª¥Â∫¶: <span class="highlight">60‰∏áÂÖÉ > 50‰∏áÂÖÉ ‚Üí 50‰∏áÂÖÉ‰ª•‰∏ä</span></p>
                        <p>&nbsp;&nbsp;‚Ä¢ LPRÂü∫ÂáÜ: <span class="highlight">1Âπ¥ÊúüLPR (3.00%)</span></p>
                        <p>&nbsp;&nbsp;‚Ä¢ Âä†ÁÇπÊï∞: <span class="highlight">400 BP</span></p>
                        <p>&nbsp;&nbsp;‚Ä¢ ÁªìÊûú: rate0 = 3.00% + 4.00% = <span class="highlight">7.00%</span></p>
                        
                        <p>2. ÊãÖ‰øùÊñπÂºèË∞ÉÊï¥Ôºà‰øùËØÅÁ±ªÔºâ: rate1 = rate0 = <span class="highlight">7.00%</span></p>
                        
                        <p>3. Âà©Áéá‰ºòÊÉ†ËÆ°ÁÆó:</p>
                        <p>&nbsp;&nbsp;‚Ä¢ Á§æ‰øùÂç°‰ºòÊÉ†: 0Âº†√ó10BP = 0BP, Êú™‰ΩøÁî®Á§æ‰øùÂç°ÊîæË¥∑ = <span class="highlight">0BP</span></p>
                        <p>&nbsp;&nbsp;‚Ä¢ Ê∏†ÈÅì‰∏öÂä°‰ºòÊÉ†: 0‰∏™ÊâãÊú∫Èì∂Ë°å√ó10BP = 0BP, Êú™ÂºÄÈÄöËÅöÂêàÊîØ‰ªò = <span class="highlight">0BP</span></p>
                        <p>&nbsp;&nbsp;‚Ä¢ ËÇ°Èáë‰ºòÊÉ†: 0‰∏áËÇ° √∑ 10 = 0√ó10BP = <span class="highlight">0BP</span></p>
                        <p>&nbsp;&nbsp;‚Ä¢ ËµÑÈáëÁïôÂ≠ò‰ºòÊÉ†: 0‰∏áÂÖÉ ‚âà <span class="highlight">0BP</span></p>
                        <p>&nbsp;&nbsp;‚Ä¢ ÊÄª‰ºòÊÉ†: 0 + 0 + 0 + 0 = <span class="highlight">0BP</span></p>
                        <p>&nbsp;&nbsp;‚Ä¢ ‰ºòÊÉ†ÂêéÂà©Áéá: rate2 = 7.00% - 0.00% = <span class="highlight">7.00%</span></p>
                        <p>&nbsp;&nbsp;‚Ä¢ ÊúÄ‰ΩéÂà©ÁéáÈôêÂà∂: ‰∏ç‰Ωé‰∫é3.00%, Âõ†Ê≠§Ë∞ÉÊï¥‰∏∫<span class="highlight">7.00%</span></p>
                        
                        <p>4. ÊΩúÂäõÂÆ¢Êà∑Âõ†Á¥†: ÈùûÊΩúÂäõÂÆ¢Êà∑, Âà©Áéá‰∏çÂèò = <span class="highlight">7.00%</span></p>
                        
                        <p>5. ÂÄüÊ¨æÁßçÁ±ªË∞ÉÊï¥Ôºà‰∏ÄËà¨ÂÄüÊ¨æÔºâ: Áõ¥Êé•ÊâßË°åËÆ°ÁÆóÁªìÊûú <span class="highlight">7.00%</span></p>
                        
                        <p>‚úÖ ÊúÄÁªàÊâßË°åÂà©Áéá: <span class="highlight">7.00%</span></p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- ÈÖçÁΩÆÊ®°ÊÄÅÊ°Ü -->
    <div id="configModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Âà©ÁéáÂèÇÊï∞ÈÖçÁΩÆ</h3>
                <span class="close">&times;</span>
            </div>
            
            <div class="form-row">
                <div class="form-group">
                    <label for="lpr1y">1Âπ¥ÊúüLPR</label>
                    <div class="input-wrapper">
                        <input type="number" id="lpr1y" step="0.01" value="3.0">
                        <span class="input-unit">%</span>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="lpr5y">5Âπ¥ÊúüLPR</label>
                    <div class="input-wrapper">
                        <input type="number" id="lpr5y" step="0.01" value="3.5">
                        <span class="input-unit">%</span>
                    </div>
                </div>
            </div>
            
            <div class="form-row">
                <div class="form-group">
                    <label for="maxSocialBenefit">Á§æ‰øùÂç°‰ºòÊÉ†‰∏äÈôê</label>
                    <div class="input-wrapper">
                        <input type="number" id="maxSocialBenefit" value="50">
                        <span class="input-unit">BP</span>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="maxChannelBenefit">Ê∏†ÈÅì‰∏öÂä°‰ºòÊÉ†‰∏äÈôê</label>
                    <div class="input-wrapper">
                        <input type="number" id="maxChannelBenefit" value="40">
                        <span class="input-unit">BP</span>
                    </div>
                </div>
            </div>
            
            <div class="form-row">
                <div class="form-group">
                    <label for="maxStockBenefit">ËÇ°Èáë‰ºòÊÉ†‰∏äÈôê</label>
                    <div class="input-wrapper">
                        <input type="number" id="maxStockBenefit" value="50">
                        <span class="input-unit">BP</span>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="maxFundsBenefit">ËµÑÈáëÁïôÂ≠ò‰ºòÊÉ†‰∏äÈôê</label>
                    <div class="input-wrapper">
                        <input type="number" id="maxFundsBenefit" value="50">
                        <span class="input-unit">BP</span>
                    </div>
                </div>
            </div>
            
            <div class="form-row">
                <div class="form-group">
                    <label for="maxTotalBenefit">‰ºòÊÉ†ÊÄªÈ¢ù‰∏äÈôê</label>
                    <div class="input-wrapper">
                        <input type="number" id="maxTotalBenefit" value="100">
                        <span class="input-unit">BP</span>
                    </div>
                </div>
            </div>
            
            <button style="margin-top: 20px;">‰øùÂ≠òÈÖçÁΩÆ</button>
        </div>
    </div>
    
    <script>
        // ÂÖ®Â±ÄÈÖçÁΩÆ
        let config = {
            lpr1y: 3.0, // 1Âπ¥ÊúüLPR
            lpr5y: 3.5, // 5Âπ¥ÊúüLPR
            maxSocialBenefit: 50, // Á§æ‰øùÂç°‰ºòÊÉ†‰∏äÈôê
            maxChannelBenefit: 40, // Ê∏†ÈÅì‰∏öÂä°‰ºòÊÉ†‰∏äÈôê
            maxStockBenefit: 50,   // ËÇ°Èáë‰ºòÊÉ†‰∏äÈôê
            maxFundsBenefit: 50,   // ËµÑÈáëÁïôÂ≠ò‰ºòÊÉ†‰∏äÈôê
            maxTotalBenefit: 100   // ‰ºòÊÉ†ÊÄªÈ¢ù‰∏äÈôê
        };
        
        // DOMÂÖÉÁ¥†ÂºïÁî®
        const customerType = document.getElementById('customerType');
        const customerCategory = document.getElementById('customerCategory');
        const loanAmount = document.getElementById('loanAmount');
        const loanTerm = document.getElementById('loanTerm');
        const guaranteeType = document.getElementById('guaranteeType');
        const collateralValue = document.getElementById('collateralValue');
        const mortgageRate = document.getElementById('mortgageRate');
        const comboContainer = document.getElementById('comboContainer');
        const socialCardNum = document.getElementById('socialCardNum');
        const socialCardLoan = document.getElementById('socialCardLoan');
        const mobileBankNum = document.getElementById('mobileBankNum');
        const aggregatePayment = document.getElementById('aggregatePayment');
        const fundsRetention = document.getElementById('fundsRetention');
        const stockAmount = document.getElementById('stockAmount');
        const potentialCustomer = document.getElementById('potentialCustomer');
        const loanCategory = document.getElementById('loanCategory');
        const renewalContainer = document.getElementById('renewalContainer');
        const originalRate = document.getElementById('originalRate');
        const calculateBtn = document.getElementById('calculateBtn');
        const resetBtn = document.getElementById('resetBtn');
        const configBtn = document.getElementById('configBtn');
        const modal = document.getElementById('configModal');
        const closeBtn = document.querySelector('.close');
        const finalRate = document.getElementById('finalRate');
        const lprPoints = document.getElementById('lprPoints');
        const lprLevel = document.getElementById('lprLevel');
        const calculationDetails = document.getElementById('calculationDetails');
        
        // ‰∫ã‰ª∂ÁõëÂê¨
        customerType.addEventListener('change', updateFormFields);
        guaranteeType.addEventListener('change', toggleComboFields);
        loanCategory.addEventListener('change', toggleRenewalFields);
        calculateBtn.addEventListener('click', calculateRate);
        resetBtn.addEventListener('click', resetForm);
        configBtn.addEventListener('click', openConfigModal);
        closeBtn.addEventListener('click', closeConfigModal);
        
        // ÂÖ≥Èó≠Ê®°ÊÄÅÊ°Ü - ÁÇπÂáªËÉåÊôØÂå∫Âüü
        window.addEventListener('click', (event) => {
            if (event.target === modal) {
                closeConfigModal();
            }
        });
        
        // ÂàùÂßãÂåñË°®ÂçïÂ≠óÊÆµ
        function updateFormFields() {
            const isPersonal = customerType.value === 'personal';
            const companyContainer = document.getElementById('customerCategoryContainer');
            const amountContainer = document.getElementById('amountContainer');
            
            // ‰∏™‰∫∫ÂÆ¢Êà∑Âíå‰ºÅ‰∏öÂÆ¢Êà∑Â≠óÊÆµÈÄªËæë
            if (isPersonal) {
                companyContainer.style.display = 'block';
                loanAmount.value = '60';
            } else {
                companyContainer.style.display = 'none';
                loanAmount.value = '200';
            }
        }
        
        // ÊòæÁ§∫/ÈöêËóèÁªÑÂêàÊãÖ‰øùÂ≠óÊÆµ
        function toggleComboFields() {
            const isCombo = guaranteeType.value === 'combo';
            comboContainer.style.display = isCombo ? 'block' : 'none';
        }
        
        // ÊòæÁ§∫/ÈöêËóèÂéüÂà©ÁéáÂ≠óÊÆµ
        function toggleRenewalFields() {
            const isRenewal = loanCategory.value !== 'normal';
            renewalContainer.style.display = isRenewal ? 'block' : 'none';
        }
        
        // ÊâìÂºÄÈÖçÁΩÆÊ®°ÊÄÅÊ°Ü
        function openConfigModal() {
            // ËÆæÁΩÆË°®ÂçïÂÄº‰∏∫ÂΩìÂâçÈÖçÁΩÆ
            document.getElementById('lpr1y').value = config.lpr1y;
            document.getElementById('lpr5y').value = config.lpr5y;
            document.getElementById('maxSocialBenefit').value = config.maxSocialBenefit;
            document.getElementById('maxChannelBenefit').value = config.maxChannelBenefit;
            document.getElementById('maxStockBenefit').value = config.maxStockBenefit;
            document.getElementById('maxFundsBenefit').value = config.maxFundsBenefit;
            document.getElementById('maxTotalBenefit').value = config.maxTotalBenefit;
            
            modal.style.display = 'flex';
        }
        
        // ÂÖ≥Èó≠ÈÖçÁΩÆÊ®°ÊÄÅÊ°Ü
        function closeConfigModal() {
            modal.style.display = 'none';
        }
        
        // ÈáçÁΩÆË°®Âçï
        function resetForm() {
            customerType.value = 'personal';
            customerCategory.value = 'general';
            loanAmount.value = '60';
            loanTerm.value = '3';
            guaranteeType.value = 'guarantee';
            comboContainer.style.display = 'none';
            collateralValue.value = '100';
            mortgageRate.value = '70';
            socialCardNum.value = '0';
            socialCardLoan.value = 'no';
            mobileBankNum.value = '0';
            aggregatePayment.value = 'no';
            fundsRetention.value = '0';
            stockAmount.value = '0';
            potentialCustomer.value = 'no';
            loanCategory.value = 'normal';
            renewalContainer.style.display = 'none';
            originalRate.value = '4.5';
            
            calculateRate();
        }
        
        // ËÆ°ÁÆóÂà©Áéá
        function calculateRate() {
            // Ëé∑ÂèñË°®ÂçïÂÄº
            const amount = parseFloat(loanAmount.value) || 0;
            const term = parseFloat(loanTerm.value) || 3;
            
            // Á¨¨‰∏ÄÊ≠•ÔºöÁ°ÆÂÆöÂü∫Á°ÄÂà©ÁéáÔºàrate0Ôºâ
            let rate0 = calculateBaseRate(amount, term);
            let basePoints = calculateBasePoints(amount, term);
            
            const isPersonal = customerType.value === 'personal';
            const amountThreshold = isPersonal ? 50 : 200;
            const amountDesc = amount <= amountThreshold ? 
                `${amountThreshold}‰∏áÂÖÉÂèä‰ª•‰∏ã` : 
                `${amountThreshold}‰∏áÂÖÉ‰ª•‰∏ä`;
            
            let details = `<p>1. Âü∫Á°ÄÂà©ÁéáËÆ°ÁÆóÔºàrate0Ôºâ:</p>`;
            details += `<p>&nbsp;&nbsp;‚Ä¢ ÂÆ¢Êà∑Á±ªÂûã: <span class="highlight">${isPersonal ? '‰∏™‰∫∫' : 'Â∞èÂæÆ‰ºÅ‰∏ö'}</span></p>`;
            if (isPersonal) {
                details += `<p>&nbsp;&nbsp;‚Ä¢ ÂÆ¢Êà∑ÂàÜÁ±ª: <span class="highlight">${getCustomerCategoryName()}</span></p>`;
            }
            details += `<p>&nbsp;&nbsp;‚Ä¢ È¢ùÂ∫¶Áª¥Â∫¶: <span class="highlight">${amount}‰∏áÂÖÉ ${amount <= amountThreshold ? '‚â§' : '>'} ${amountThreshold}‰∏áÂÖÉ ‚Üí ${amountDesc}</span></p>`;
            
            const referenceLPR = term <= 3 ? config.lpr1y : config.lpr5y;
            const lprDesc = term <= 3 ? 
                `1Âπ¥ÊúüLPR (${config.lpr1y}%)` : 
                `5Âπ¥ÊúüLPR (${config.lpr5y}%)`;
                
            details += `<p>&nbsp;&nbsp;‚Ä¢ LPRÂü∫ÂáÜ: <span class="highlight">${lprDesc}</span></p>`;
            details += `<p>&nbsp;&nbsp;‚Ä¢ Âä†ÁÇπÊï∞: <span class="highlight">${basePoints} BP</span></p>`;
            details += `<p>&nbsp;&nbsp;‚Ä¢ ÁªìÊûú: rate0 = ${referenceLPR}% + ${basePoints/100}% = <span class="highlight">${rate0.toFixed(2)}%</span></p>`;
            
            // Á¨¨‰∫åÊ≠•ÔºöÊ†πÊçÆÊãÖ‰øùÊñπÂºèË∞ÉÊï¥Ôºàrate1Ôºâ
            const gType = guaranteeType.value;
            let rate1 = rate0;
            
            switch(gType) {
                case 'mortgage':
                    rate1 = rate0 - 1.0; // Âáè100BP
                    details += `<p>2. ÊãÖ‰øùÊñπÂºèË∞ÉÊï¥ÔºàË∂≥ÂÄºÊäµÊäºÔºâ: rate1 = ${rate0.toFixed(2)}% - 100BP = <span class="highlight">${rate1.toFixed(2)}%</span></p>`;
                    break;
                case 'pledge':
                    rate1 = 3.5; // Áõ¥Êé•ÊâßË°å3.5%
                    details += `<p>2. ÊãÖ‰øùÊñπÂºèË∞ÉÊï¥ÔºàË∂≥ÂÄºË¥®ÊäºÔºâ: Áõ¥Êé•ÊâßË°å<span class="highlight">3.5%</span></p>`;
                    break;
                case 'guarantee':
                    details += `<p>2. ÊãÖ‰øùÊñπÂºèË∞ÉÊï¥Ôºà‰øùËØÅÁ±ªÔºâ: rate1 = rate0 = <span class="highlight">${rate1.toFixed(2)}%</span></p>`;
                    break;
                case 'combo':
                    const collateralVal = parseFloat(collateralValue.value) || 0;
                    const mortgageR = parseFloat(mortgageRate.value) / 100 || 0.7;
                    
                    // ÊäµÊäºÈÉ®ÂàÜË¥∑Ê¨æÈ¢ùÂ∫¶ = min(ÊäµÊäºÁâ©‰ª∑ÂÄº * ÊäµÊäºÁéá, Ë¥∑Ê¨æÈáëÈ¢ù)
                    const mortgageAmount = Math.min(collateralVal * mortgageR, amount);
                    
                    // ‰øùËØÅÈÉ®ÂàÜË¥∑Ê¨æÈ¢ùÂ∫¶ = Ë¥∑Ê¨æÊÄªÈ¢ù - ÊäµÊäºÈÉ®ÂàÜÈ¢ùÂ∫¶
                    const guaranteeAmount = amount - mortgageAmount;
                    
                    // ÊäµÊäºÈÉ®ÂàÜÊâßË°åÂà©Áéá = rate0 - 1.0%
                    const mortgageRateValue = rate0 - 1.0;
                    
                    // Âä†ÊùÉÂπ≥ÂùáËÆ°ÁÆóÊï¥‰ΩìÂà©Áéá
                    rate1 = (guaranteeAmount * rate0 + mortgageAmount * mortgageRateValue) / amount;
                    
                    details += `<p>2. ÊãÖ‰øùÊñπÂºèË∞ÉÊï¥Ôºà‰øùËØÅ+ÊäµÊäºÁªÑÂêàÔºâ:</p>`;
                    details += `<p>&nbsp;&nbsp;‚Ä¢ ÊäµÊäºÁâ©ËØÑ‰º∞‰ª∑ÂÄº: <span class="highlight">${collateralVal}‰∏áÂÖÉ</span></p>`;
                    details += `<p>&nbsp;&nbsp;‚Ä¢ ÊäµÊäºÁéá: <span class="highlight">${(mortgageR*100).toFixed(0)}%</span></p>`;
                    details += `<p>&nbsp;&nbsp;‚Ä¢ ÂèØÊãÖ‰øùÈ¢ùÂ∫¶: <span class="highlight">${(collateralVal * mortgageR).toFixed(2)}‰∏áÂÖÉ</span></p>`;
                    details += `<p>&nbsp;&nbsp;‚Ä¢ ÊäµÊäºÈÉ®ÂàÜÈáëÈ¢ù: <span class="highlight">${mortgageAmount.toFixed(2)}‰∏áÂÖÉ</span>, ÊâßË°åÂà©Áéá: <span class="highlight">${mortgageRateValue.toFixed(2)}%</span></p>`;
                    details += `<p>&nbsp;&nbsp;‚Ä¢ ‰øùËØÅÈÉ®ÂàÜÈáëÈ¢ù: <span class="highlight">${guaranteeAmount.toFixed(2)}‰∏áÂÖÉ</span>, ÊâßË°åÂà©Áéá: <span class="highlight">${rate0.toFixed(2)}%</span></p>`;
                    details += `<p>&nbsp;&nbsp;‚Ä¢ Âä†ÊùÉËÆ°ÁÆó: rate1 = (${guaranteeAmount.toFixed(2)}√ó${rate0.toFixed(2)}% + ${mortgageAmount.toFixed(2)}√ó${mortgageRateValue.toFixed(2)}%)/${amount} = <span class="highlight">${rate1.toFixed(3)}%</span></p>`;
                    break;
            }
            
            // Á¨¨‰∏âÊ≠•ÔºöËÆ°ÁÆóÂêÑÈ°π‰ºòÊÉ†Ôºàrate2Ôºâ
            let socialBenefit = 0;
            // Á§æ‰øùÂç°Êï∞Èáè‰ºòÊÉ†ÔºàÊØèÂº†10BPÔºâ
            const numCards = parseInt(socialCardNum.value) || 0;
            socialBenefit += numCards * 10;
            
            // ‰ΩøÁî®Á§æ‰øùÂç°ÂèëÊîæË¥∑Ê¨æ‰ºòÊÉ†
            if (socialCardLoan.value === 'yes') socialBenefit += 10;
            
            // ÈôêÂà∂Á§æ‰øùÂç°ÊÄª‰ºòÊÉ†
            socialBenefit = Math.min(socialBenefit, config.maxSocialBenefit);
            
            // Ê∏†ÈÅì‰∏öÂä°‰ºòÊÉ†
            let channelBenefit = 0;
            const numMobileBank = parseInt(mobileBankNum.value) || 0;
            channelBenefit += numMobileBank * 10;
            if (aggregatePayment.value === 'yes') channelBenefit += 20;
            channelBenefit = Math.min(channelBenefit, config.maxChannelBenefit);
            
            // ËÇ°Èáë‰ºòÊÉ†
            const stock = parseInt(stockAmount.value) || 0;
            let stockBenefit = Math.floor(stock / 10) * 10; // ÊØè10‰∏áËÇ°‰ºòÊÉ†10BP
            stockBenefit = Math.min(stockBenefit, config.maxStockBenefit);
            
            // ËµÑÈáëÁïôÂ≠ò‰ºòÊÉ†
            const funds = parseFloat(fundsRetention.value) || 0;
            let fundsBenefit = Math.floor(funds); // ÊØè‰∏áÂÖÉ‰ºòÊÉ†1BP
            fundsBenefit = Math.min(fundsBenefit, config.maxFundsBenefit);
            
            // ÊÄª‰ºòÊÉ†ËÆ°ÁÆó
            const totalBenefitBP = socialBenefit + channelBenefit + stockBenefit + fundsBenefit;
            const cappedBenefit = Math.min(totalBenefitBP, config.maxTotalBenefit);
            const rate2 = rate1 - cappedBenefit / 100; // ËΩ¨Êç¢‰∏∫ÁôæÂàÜÊØî
            
            // Á°Æ‰øù‰∏ç‰Ωé‰∫éÂêåÊ°£Ê¨°LPR
            const minRate = term <= 3 ? config.lpr1y : config.lpr5y;
            const finalRateBeforePotential = Math.max(rate2, minRate);
            
            details += `<p>3. Âà©Áéá‰ºòÊÉ†ËÆ°ÁÆó:</p>`;
            details += `<p>&nbsp;&nbsp;‚Ä¢ Á§æ‰øùÂç°‰ºòÊÉ†: ${numCards}Âº†√ó10BP = ${numCards * 10}BP, `;
            details += socialCardLoan.value === 'yes' ? '‰ΩøÁî®Á§æ‰øùÂç°ÊîæË¥∑ +10BP = ' : 'Êú™‰ΩøÁî®Á§æ‰øùÂç°ÊîæË¥∑ = ';
            details += `<span class="highlight">${socialBenefit}BP</span> (ÊúÄÈ´ò${config.maxSocialBenefit}BP)</p>`;
            
            details += `<p>&nbsp;&nbsp;‚Ä¢ Ê∏†ÈÅì‰∏öÂä°‰ºòÊÉ†: ${numMobileBank}‰∏™ÊâãÊú∫Èì∂Ë°å√ó10BP = ${numMobileBank * 10}BP, `;
            details += aggregatePayment.value === 'yes' ? 'ÂºÄÈÄöËÅöÂêàÊîØ‰ªò +20BP = ' : 'Êú™ÂºÄÈÄöËÅöÂêàÊîØ‰ªò = ';
            details += `<span class="highlight">${channelBenefit}BP</span> (ÊúÄÈ´ò${config.maxChannelBenefit}BP)</p>`;
            
            details += `<p>&nbsp;&nbsp;‚Ä¢ ËÇ°Èáë‰ºòÊÉ†: ${stock}‰∏áËÇ° √∑ 10 = ${Math.floor(stock / 10)}√ó10BP = <span class="highlight">${stockBenefit}BP</span> (ÊúÄÈ´ò${config.maxStockBenefit}BP)</p>`;
            
            details += `<p>&nbsp;&nbsp;‚Ä¢ ËµÑÈáëÁïôÂ≠ò‰ºòÊÉ†: ${funds}‰∏áÂÖÉ ‚âà ${Math.floor(funds)}BP = <span class="highlight">${fundsBenefit}BP</span> (ÊúÄÈ´ò${config.maxFundsBenefit}BP)</p>`;
            
            details += `<p>&nbsp;&nbsp;‚Ä¢ ÊÄª‰ºòÊÉ†: ${socialBenefit} + ${channelBenefit} + ${stockBenefit} + ${fundsBenefit} = <span class="highlight">${totalBenefitBP}BP</span></p>`;
            details += `<p>&nbsp;&nbsp;‚Ä¢ ‰ºòÊÉ†ÈôêÂà∂: ÊâÄÊúâ‰ºòÊÉ†Á¥ØËÆ°‰∏äÈôê${config.maxTotalBenefit}BP</p>`;
            details += `<p>&nbsp;&nbsp;‚Ä¢ ÊúÄÁªà‰ºòÊÉ†: <span class="highlight">${cappedBenefit}BP</span></p>`;
            details += `<p>&nbsp;&nbsp;‚Ä¢ ‰ºòÊÉ†ÂêéÂà©Áéá: rate2 = ${rate1.toFixed(2)}% - ${cappedBenefit/100}% = <span class="highlight">${rate2.toFixed(3)}%</span></p>`;
            details += `<p>&nbsp;&nbsp;‚Ä¢ ÊúÄ‰ΩéÂà©ÁéáÈôêÂà∂: ‰∏ç‰Ωé‰∫é${minRate}%, Âõ†Ê≠§Ë∞ÉÊï¥‰∏∫<span class="highlight">${finalRateBeforePotential.toFixed(3)}%</span></p>`;
            
            // Á¨¨ÂõõÊ≠•ÔºöËÄÉËôëÊΩúÂäõÂÆ¢Êà∑Ôºàrate3Ôºâ
            let rate3 = finalRateBeforePotential;
            if (potentialCustomer.value === 'yes') {
                rate3 += 0.5; // Âä†50BP
                details += `<p>4. ÊΩúÂäõÂÆ¢Êà∑Âõ†Á¥†: Âä†50BP = <span class="highlight">${rate3.toFixed(3)}%</span></p>`;
            } else {
                details += `<p>4. ÊΩúÂäõÂÆ¢Êà∑Âõ†Á¥†: ÈùûÊΩúÂäõÂÆ¢Êà∑, Âà©Áéá‰∏çÂèò = <span class="highlight">${rate3.toFixed(3)}%</span></p>`;
            }
            
            // Á¨¨‰∫îÊ≠•ÔºöÂÄüÊ¨æÁßçÁ±ªË∞ÉÊï¥Ôºàrate4Ôºâ
            const loanType = loanCategory.value;
            let finalRateValue = rate3;
            
            if (loanType === 'renewal') {
                const original = parseFloat(originalRate.value) || 0;
                const renewalRate = original + 0.5; // Âä†50BP
                finalRateValue = Math.min(renewalRate, rate3);
                
                details += `<p>5. ÂÄüÊ¨æÁßçÁ±ªË∞ÉÊï¥ÔºàÂéüÈ¢ùÂ∫¶ÂéüÊãÖ‰øùÊî∂ÂõûÂÜçË¥∑Ôºâ:</p>`;
                details += `<p>&nbsp;&nbsp;‚Ä¢ ÂéüÊâßË°åÂà©Áéá: ${original}% + 50BP = <span class="highlight">${renewalRate}%</span></p>`;
                details += `<p>&nbsp;&nbsp;‚Ä¢ ‰∏éÂΩìÂâçËÆ°ÁÆóÁªìÊûúÊØîËæÉÂ≠∞‰Ωé: min(${renewalRate}%, ${rate3.toFixed(2)}%) = <span class="highlight">${finalRateValue.toFixed(3)}%</span></p>`;
            } else if (loanType === 'restructure') {
                const original = parseFloat(originalRate.value) || 0;
                finalRateValue = original - 1.0; // Âáè100BP
                
                details += `<p>5. ÂÄüÊ¨æÁßçÁ±ªË∞ÉÊï¥ÔºàÁª≠Ë¥∑/ÂÄüÊñ∞ËøòÊóß/ÂÄ∫Âä°ÈáçÁªÑÔºâ: ${original}% - 100BP = <span class="highlight">${finalRateValue.toFixed(3)}%</span></p>`;
            } else {
                details += `<p>5. ÂÄüÊ¨æÁßçÁ±ªË∞ÉÊï¥Ôºà‰∏ÄËà¨ÂÄüÊ¨æÔºâ: Áõ¥Êé•ÊâßË°åËÆ°ÁÆóÁªìÊûú <span class="highlight">${finalRateValue.toFixed(3)}%</span></p>`;
            }
            
            // ÊúÄÁªàËæìÂá∫
            finalRateValue = Math.round(finalRateValue * 100) / 100; // ‰øùÁïô‰∏§‰ΩçÂ∞èÊï∞
            const referenceLPRFinal = term <= 3 ? config.lpr1y : config.lpr5y;
            const points = Math.round((finalRateValue - referenceLPRFinal) * 100); // Âü∫ÁÇπ = (Âà©ÁéáÂ∑Æ) * 100
            
            finalRate.textContent = finalRateValue.toFixed(2) + '%';
            lprPoints.textContent = (points >= 0 ? '+' : '') + points + ' BP';
            lprLevel.textContent = term <= 3 ? '1Âπ¥ÊúüLPR' : '5Âπ¥ÊúüLPR';
            
            details += `<p>‚úÖ ÊúÄÁªàÊâßË°åÂà©Áéá: <span class="highlight">${finalRateValue.toFixed(2)}%</span></p>`;
            calculationDetails.innerHTML = details;
        }
        
        // Âü∫Á°ÄÂà©ÁéáËÆ°ÁÆóÔºàrate0Ôºâ
        function calculateBaseRate(amount, term) {
            let basePoints = 0;
            
            if (customerType.value === 'personal') {
                if (amount <= 50) { // 50‰∏áÂÖÉÂèä‰ª•‰∏ã
                    switch(customerCategory.value) {
                        case 'general': basePoints = 350; break;
                        case 'premium': basePoints = 50; break;
                        case 'preferred': basePoints = 100; break;
                    }
                } else { // 50‰∏áÂÖÉ‰ª•‰∏ä
                    switch(customerCategory.value) {
                        case 'general': basePoints = 400; break;
                        case 'premium': basePoints = 100; break;
                        case 'preferred': basePoints = 150; break;
                    }
                }
            } else { // Â∞èÂæÆ‰ºÅ‰∏ö‰∏ª
                basePoints = amount <= 200 ? 300 : 350;
            }
            
            const referenceLPR = term <= 3 ? config.lpr1y : config.lpr5y;
            return referenceLPR + basePoints / 100;
        }
        
        // Âü∫Á°ÄÂä†ÁÇπÊï∞ËÆ°ÁÆó
        function calculateBasePoints(amount, term) {
            let basePoints = 0;
            
            if (customerType.value === 'personal') {
                if (amount <= 50) { // 50‰∏áÂÖÉÂèä‰ª•‰∏ã
                    switch(customerCategory.value) {
                        case 'general': basePoints = 350; break;
                        case 'premium': basePoints = 50; break;
                        case 'preferred': basePoints = 100; break;
                    }
                } else { // 50‰∏áÂÖÉ‰ª•‰∏ä
                    switch(customerCategory.value) {
                        case 'general': basePoints = 400; break;
                        case 'premium': basePoints = 100; break;
                        case 'preferred': basePoints = 150; break;
                    }
                }
            } else { // Â∞èÂæÆ‰ºÅ‰∏ö‰∏ª
                basePoints = amount <= 200 ? 300 : 350;
            }
            
            return basePoints;
        }
        
        // Ëé∑ÂèñÂÆ¢Êà∑ÂàÜÁ±ªÁöÑÂêçÁß∞
        function getCustomerCategoryName() {
            switch(customerCategory.value) {
                case 'general': return '‰∏ÄËà¨ÂÆ¢Êà∑';
                case 'premium': return 'È´òÁ´ØÂÆ¢Êà∑';
                case 'preferred': return 'ÂÖ∂‰ªñ‰ºòË¥®ÂÆ¢Êà∑';
                default: return '';
            }
        }
        
        // ÂàùÂßãÂåñ
        document.addEventListener('DOMContentLoaded', () => {
            updateFormFields();
            toggleComboFields();
            toggleRenewalFields();
            calculateRate(); // ÂàùÂßãËÆ°ÁÆó
        });
    </script>
</body>
</html>