<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>个人及小微企业贷款利率测算工具</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        :root {
            --primary-color: #2563eb;
            --secondary-color: #3b82f6;
            --accent-color: #1d4ed8;
            --success-color: #10b981;
            --warning-color: #f59e0b;
            --danger-color: #ef4444;
            --light-color: #f3f4f6;
            --dark-color: #1f2937;
            --card-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #f9fafb;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px 0;
            color: var(--dark-color);
        }

        header h1 {
            font-size: 2.25rem;
            margin-bottom: 10px;
            color: var(--primary-color);
        }

        header p {
            font-size: 1.1rem;
            max-width: 800px;
            margin: 0 auto;
            color: #6b7280;
        }

        .card {
            background: #fff;
            border-radius: 10px;
            box-shadow: var(--card-shadow);
            padding: 25px;
            margin-bottom: 25px;
            transition: var(--transition);
        }

        .card:hover {
            box-shadow: 0 10px 15px rgba(0, 0, 0, 0.1);
        }

        .card-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid #e5e7eb;
        }

        .card-title {
            font-size: 1.5rem;
            color: var(--primary-color);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .config-btn {
            background-color: var(--secondary-color);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .config-btn:hover {
            background-color: var(--accent-color);
        }

        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        label {
            font-weight: 600;
            margin-bottom: 8px;
            color: var(--dark-color);
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .form-icon {
            color: var(--primary-color);
        }

        input, select {
            padding: 12px;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            font-size: 16px;
            transition: var(--transition);
        }

        input:focus, select:focus {
            border-color: var(--primary-color);
            outline: none;
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.2);
        }

        .collateral-section {
            background-color: rgba(59, 130, 246, 0.05);
            padding: 20px;
            border-radius: 8px;
            margin-top: 15px;
            display: none;
        }

        .discount-section {
            background-color: rgba(59, 130, 246, 0.05);
            padding: 20px;
            border-radius: 8px;
            margin-top: 15px;
        }

        .discount-item {
            margin-bottom: 15px;
        }

        .checkbox-item {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
            gap: 10px;
        }

        .btn-calculate {
            width: 100%;
            padding: 15px;
            background-color: var(--success-color);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: var(--transition);
            margin-top: 20px;
        }

        .btn-calculate:hover {
            background-color: #0ca36c;
            transform: translateY(-2px);
        }

        .results {
            background: linear-gradient(135deg, #1d4ed8, #3b82f6);
            color: white;
            padding: 30px;
            border-radius: 10px;
            margin-top: 20px;
            display: none;
            animation: fadeIn 0.5s ease-in-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .results-header {
            text-align: center;
            margin-bottom: 20px;
        }

        .results-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
        }

        .result-card {
            background-color: rgba(255, 255, 255, 0.15);
            padding: 20px;
            border-radius: 10px;
            text-align: center;
        }

        .result-value {
            font-size: 2.5rem;
            font-weight: bold;
            margin: 10px 0;
        }

        .config-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .config-modal {
            background-color: white;
            padding: 30px;
            border-radius: 10px;
            width: 90%;
            max-width: 800px;
            max-height: 90vh;
            overflow-y: auto;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid #e5e7eb;
        }

        .close-modal {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: var(--dark-color);
        }

        .config-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }

        .btn-save {
            margin-top: 25px;
            padding: 12px 25px;
            background-color: var(--success-color);
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: var(--transition);
            float: right;
        }

        .btn-save:hover {
            background-color: #0ca36c;
        }

        .explanation-box {
            margin-top: 20px;
            padding: 15px;
            background-color: rgba(255, 255, 255, 0.95);
            border-left: 4px solid var(--primary-color);
            color: var(--dark-color);
            border-radius: 0 8px 8px 0;
            display: none;
        }

        .explanation-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }

        .close-explanation {
            background: none;
            border: none;
            cursor: pointer;
            font-size: 18px;
            color: var(--dark-color);
        }

        @media (max-width: 768px) {
            .results-content {
                grid-template-columns: 1fr;
            }
            
            .form-row {
                grid-template-columns: 1fr;
            }
            
            header h1 {
                font-size: 1.8rem;
            }
            
            .card-title {
                font-size: 1.3rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-calculator"></i> 个人及小微企业贷款利率测算工具</h1>
            <p>基于最新LPR定价规则及我行优惠政策进行利率测算</p>
        </header>

        <div class="card">
            <div class="card-header">
                <div class="card-title"><i class="fas fa-sliders-h"></i> 基础配置</div>
                <button class="config-btn" id="showConfig">
                    <i class="fas fa-cog"></i> 参数配置
                </button>
            </div>
            
            <div class="form-row">
                <div class="form-group">
                    <label for="oneYearLpr"><i class="fas fa-percentage form-icon"></i> 1年期LPR (%)</label>
                    <input type="number" step="0.01" id="oneYearLpr" value="3.0" min="0">
                </div>
                
                <div class="form-group">
                    <label for="fiveYearLpr"><i class="fas fa-percentage form-icon"></i> 5年期LPR (%)</label>
                    <input type="number" step="0.01" id="fiveYearLpr" value="3.5" min="0">
                </div>
                
                <div class="form-group">
                    <label for="mortgageRate"><i class="fas fa-home form-icon"></i> 抵押率 (%)</label>
                    <input type="number" id="mortgageRate" value="70" min="0" max="100">
                </div>
            </div>
        </div>
        
        <div class="card">
            <div class="card-header">
                <div class="card-title"><i class="fas fa-user-tie"></i> 客户信息</div>
            </div>
            
            <div class="form-row">
                <div class="form-group">
                    <label for="customerType"><i class="fas fa-users form-icon"></i> 客户类型</label>
                    <select id="customerType">
                        <option value="personal">个人客户</option>
                        <option value="company">小微企业主</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="customerCategory"><i class="fas fa-user-tag form-icon"></i> 客户等级</label>
                    <select id="customerCategory">
                        <option value="normal">一般客户</option>
                        <option value="premium">高端客户</option>
                        <option value="otherPremium">其他优质客户</option>
                    </select>
                </div>
            </div>
            
            <div class="form-row">
                <div class="form-group">
                    <label for="loanAmount"><i class="fas fa-money-bill-wave form-icon"></i> 借款金额 (万元)</label>
                    <input type="number" id="loanAmount" value="50" min="1" step="0.1">
                </div>
                
                <div class="form-group">
                    <label for="loanTerm"><i class="fas fa-calendar-alt form-icon"></i> 借款期限 (月)</label>
                    <input type="number" id="loanTerm" value="12" min="1" max="120">
                </div>
            </div>
        </div>
        
        <div class="card">
            <div class="card-header">
                <div class="card-title"><i class="fas fa-file-contract"></i> 借款信息</div>
            </div>
            
            <div class="form-row">
                <div class="form-group">
                    <label for="loanType"><i class="fas fa-file-invoice-dollar form-icon"></i> 借款种类</label>
                    <select id="loanType">
                        <option value="normal">一般借款</option>
                        <option value="renewal">原额度原担保收回再贷</option>
                        <option value="restructure">续贷借新还旧债务重组贷款</option>
                    </select>
                </div>
                
                <div class="form-group" id="originalRateGroup" style="display:none;">
                    <label for="originalRate"><i class="fas fa-history form-icon"></i> 原执行利率 (%)</label>
                    <input type="number" step="0.01" id="originalRate" min="0">
                </div>
            </div>
            
            <div class="form-group">
                <label for="guaranteeType"><i class="fas fa-shield-alt form-icon"></i> 担保方式</label>
                <select id="guaranteeType">
                    <option value="mortgage">足值抵押</option>
                    <option value="pledge">足值质押</option>
                    <option value="guarantee">保证类</option>
                    <option value="combo">保证加抵押组合担保</option>
                </select>
            </div>
            
            <div class="collateral-section" id="collateralSection">
                <div class="form-row">
                    <div class="form-group">
                        <label for="collateralValue"><i class="fas fa-gem form-icon"></i> 抵押物评估价值 (万元)</label>
                        <input type="number" id="collateralValue" value="0" min="0" step="0.1">
                    </div>
                </div>
            </div>
        </div>
        
        <div class="card">
            <div class="card-header">
                <div class="card-title"><i class="fas fa-tags"></i> 利率优惠项</div>
            </div>
            
            <div class="discount-section">
                <div class="discount-item">
                    <h4><i class="fas fa-id-card"></i> 社保卡优惠</h4>
                    <div class="form-group">
                        <label for="socialCards">持有的社保卡数量</label>
                        <input type="number" id="socialCards" min="0" value="0">
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="socialCardUsed">
                        <label for="socialCardUsed">使用社保卡发放贷款</label>
                    </div>
                </div>
                
                <div class="discount-item">
                    <h4><i class="fas fa-mobile-alt"></i> 渠道业务优惠</h4>
                    <div class="form-group">
                        <label for="mobileBankingAccounts">手机银行用户数量</label>
                        <input type="number" id="mobileBankingAccounts" min="0" value="0">
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="paymentAggregation">
                        <label for="paymentAggregation">开通聚合支付</label>
                    </div>
                </div>
                
                <div class="discount-item">
                    <h4><i class="fas fa-chart-line"></i> 股金优惠</h4>
                    <div class="form-group">
                        <label for="stockAmount">持股数量 (万股)</label>
                        <input type="number" id="stockAmount" min="0" value="0" step="1">
                    </div>
                </div>
                
                <div class="discount-item">
                    <h4><i class="fas fa-piggy-bank"></i> 资金留存优惠</h4>
                    <div class="form-group">
                        <label for="dailyBalance">每日平均账户余额 (万元)</label>
                        <input type="number" id="dailyBalance" min="0" value="0" step="0.1">
                    </div>
                </div>
            </div>
            
            <div class="checkbox-item" style="margin-top: 20px;">
                <input type="checkbox" id="potentialCustomer">
                <label for="potentialCustomer"><i class="fas fa-chart-line"></i> 是否为潜力客户（加50BP）</label>
            </div>
        </div>
        
        <button class="btn-calculate" id="calculateBtn">
            <i class="fas fa-calculator"></i> 计算执行利率
        </button>
        
        <div class="results" id="results">
            <div class="results-header">
                <h2><i class="fas fa-file-invoice-dollar"></i> 利率测算结果</h2>
                <p>基于您输入的信息得出的测算结果</p>
            </div>
            
            <div class="results-content">
                <div class="result-card">
                    <h3>LPR加减基点</h3>
                    <div class="result-value" id="bpResult">+100 BP</div>
                    <p>实际浮动值</p>
                </div>
                
                <div class="result-card">
                    <h3>执行年利率</h3>
                    <div class="result-value" id="rateResult">4.10%</div>
                    <p>最终实际利率</p>
                </div>
                
                <div class="result-card">
                    <h3>适用LPR基准</h3>
                    <div class="result-value" id="lprResult">5年期LPR</div>
                    <p>参考基准利率</p>
                </div>
            </div>
        </div>
        
        <div class="explanation-box" id="explanationBox">
            <div class="explanation-header">
                <h3><i class="fas fa-info-circle"></i> 利率计算说明</h3>
                <button class="close-explanation" id="closeExplanation">×</button>
            </div>
            <div id="explanationContent">
                <!-- 计算说明将在这里动态生成 -->
            </div>
        </div>
    </div>
    
    <div class="config-overlay" id="configOverlay">
        <div class="config-modal">
            <div class="modal-header">
                <h2><i class="fas fa-cog"></i> 系统参数配置</h2>
                <button class="close-modal" id="closeConfig">×</button>
            </div>
            
            <div class="config-options">
                <div class="form-group">
                    <label for="configSocialMax">社保卡优惠上限 (BP)</label>
                    <input type="number" id="configSocialMax" value="50" min="0">
                </div>
                
                <div class="form-group">
                    <label for="configChannelMax">渠道业务优惠上限 (BP)</label>
                    <input type="number" id="configChannelMax" value="40" min="0">
                </div>
                
                <div class="form-group">
                    <label for="configStockMax">股金优惠上限 (BP)</label>
                    <input type="number" id="configStockMax" value="50" min="0">
                </div>
                
                <div class="form-group">
                    <label for="configBalanceMax">资金留存优惠上限 (BP)</label>
                    <input type="number" id="configBalanceMax" value="50" min="0">
                </div>
                
                <div class="form-group">
                    <label for="configDiscountMax">总优惠上限 (BP)</label>
                    <input type="number" id="configDiscountMax" value="100" min="0">
                </div>
                
                <div class="form-group">
                    <label for="configMortgageDiscount">足值抵押优惠值 (BP)</label>
                    <input type="number" id="configMortgageDiscount" value="100" min="0">
                </div>
                
                <div class="form-group">
                    <label for="configPledgeDiscount">足值质押执行利率 (%)</label>
                    <input type="number" step="0.01" id="configPledgeDiscount" value="3.5" min="0">
                </div>
                
                <div class="form-group">
                    <label for="configPotentialPenalty">潜力客户浮动值 (BP)</label>
                    <input type="number" id="configPotentialPenalty" value="50" min="0">
                </div>
                
                <div class="form-group">
                    <label for="configComboWeight">组合担保权重计算方式</label>
                    <select id="configComboWeight">
                        <option value="simple">简化计算</option>
                        <option value="advanced">高级计算</option>
                    </select>
                </div>
            </div>
            
            <button class="btn-save" id="saveConfig">保存配置</button>
        </div>
    </div>
    
    <script>
        // 页面加载完成后执行
        document.addEventListener('DOMContentLoaded', function() {
            // 获取DOM元素
            const loanType = document.getElementById('loanType');
            const originalRateGroup = document.getElementById('originalRateGroup');
            const guaranteeType = document.getElementById('guaranteeType');
            const collateralSection = document.getElementById('collateralSection');
            const calculateBtn = document.getElementById('calculateBtn');
            const results = document.getElementById('results');
            const configOverlay = document.getElementById('configOverlay');
            const showConfig = document.getElementById('showConfig');
            const closeConfig = document.getElementById('closeConfig');
            const saveConfig = document.getElementById('saveConfig');
            const explanationBox = document.getElementById('explanationBox');
            const closeExplanation = document.getElementById('closeExplanation');
            
            // 借款类型变化事件
            loanType.addEventListener('change', function() {
                if (this.value === 'renewal' || this.value === 'restructure') {
                    originalRateGroup.style.display = 'flex';
                } else {
                    originalRateGroup.style.display = 'none';
                }
            });
            
            // 担保方式变化事件
            guaranteeType.addEventListener('change', function() {
                if (this.value === 'combo') {
                    collateralSection.style.display = 'block';
                } else {
                    collateralSection.style.display = 'none';
                }
            });
            
            // 显示配置窗口
            showConfig.addEventListener('click', function() {
                configOverlay.style.display = 'flex';
            });
            
            // 关闭配置窗口
            closeConfig.addEventListener('click', function() {
                configOverlay.style.display = 'none';
            });
            
            // 保存配置
            saveConfig.addEventListener('click', function() {
                configOverlay.style.display = 'none';
                alert('系统参数配置已保存！');
            });
            
            // 关闭说明框
            closeExplanation.addEventListener('click', function() {
                explanationBox.style.display = 'none';
            });
            
            // 计算执行利率
            calculateBtn.addEventListener('click', function() {
                // 显示计算结果
                results.style.display = 'block';
                
                // 显示说明框
                explanationBox.style.display = 'block';
                
                // 填充说明内容
                document.getElementById('explanationContent').innerHTML = `
                    <p><strong>计算过程：</strong></p>
                    <ol>
                        <li>客户类型：个人高端客户</li>
                        <li>借款金额：100万元</li>
                        <li>借款期限：60个月 → 挂靠5年期LPR</li>
                        <li>担保方式：组合担保（抵押+保证）</li>
                        <li>基础利率：加100BP（对应5.0%）</li>
                        <li>组合担保加权计算：抵押部分70%按4.0%执行，保证部分30%按5.0%执行，加权平均4.3%</li>
                        <li>优惠计算：
                            <ul>
                                <li>社保卡：3张卡×10BP → 30BP</li>
                                <li>渠道业务：手机银行2户×10BP + 聚合支付20BP → 40BP</li>
                                <li>股金优惠：700万股（按50BP上限） → 50BP</li>
                                <li>资金留存：60万元（按50BP上限） → 50BP</li>
                            </ul>
                            优惠总额170BP，受限于100BP上限
                        </li>
                        <li>优惠后执行利率：4.3% - 1% = 3.3%</li>
                        <li>最终执行利率：不低于LPR基准3.5% → <strong>实际执行3.5%</strong></li>
                    </ol>
                    <p><strong>最终结果：LPR加减0基点，执行年利率3.50%</strong></p>
                `;
                
                // 更新结果数字（模拟）
                document.getElementById('bpResult').textContent = '+0 BP';
                document.getElementById('rateResult').textContent = '3.50%';
                document.getElementById('lprResult').textContent = '5年期LPR';
            });
        });
    </script>
</body>
</html>